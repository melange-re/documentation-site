<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Caml_exceptions (melange.Caml_exceptions)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">melange</a> &#x00BB; Caml_exceptions</nav><header class="odoc-preamble"><h1>Module <code><span>Caml_exceptions</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.id" class="def record field anchored"><a href="#type-t.id" class="anchor"></a><code><span>id: string,</span></code></li></ol><code><span>}</span><span>;</span></code></div></div><p>Could be exported for better inlining It's common that we have</p><pre class="language-ocaml"><code>a = caml_set_oo_id([248,&quot;string&quot;,0]) </code></pre><p>This can be inlined as</p><pre class="language-ocaml"><code>a = caml_set_oo_id([248,&quot;string&quot;, caml_oo_last_id++]) </code></pre><div class="odoc-spec"><div class="spec value anchored" id="val-id"><a href="#val-id" class="anchor"></a><code><span><span class="keyword">let</span> id: <a href="../Bs_stdlib_mini/index.html#type-ref">Bs_stdlib_mini.ref</a>(int);</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">let</span> create: <span>string <span class="arrow">=&gt;</span></span> string;</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-caml_is_extension"><a href="#val-caml_is_extension" class="anchor"></a><code><span><span class="keyword">let</span> caml_is_extension: <span><span class="type-var">'a</span> <span class="arrow">=&gt;</span></span> bool;</span></code></div><div class="spec-doc"><p>This function should never throw It could be either customized exception or built in exception Note due to that in OCaml extensible variants have the same runtime representation as exception, so we can not really tell the difference.</p><p>However, if we make a false alarm, classified extensible variant as exception, it will be OKAY for nested pattern match</p><pre class="language-ocaml"><code>match toExn x : exn option with
| Some _
  -&gt; Js.log &quot;Could be an OCaml exception or an open variant&quot;
(* If it is an Open variant, it will never pattern match,
   This is Okay, since exception could never have exhaustive pattern match

*)
| None -&gt; Js.log &quot;Not an OCaml exception for sure&quot;</code></pre><p>However, there is still something wrong, since if user write such code</p><pre class="language-ocaml"><code>match toExn x with
| Some _ -&gt; (* assert it is indeed an exception *)
  (* This assertion is wrong, since it could be an open variant *)
| None -&gt; (* assert it is not an exception *)</code></pre><p>This is not a problem in `try .. with` since the logic above is not expressible, see more design in <code>destruct_exn.md</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-caml_exn_slot_name"><a href="#val-caml_exn_slot_name" class="anchor"></a><code><span><span class="keyword">let</span> caml_exn_slot_name: <span><a href="#type-t">t</a> <span class="arrow">=&gt;</span></span> string;</span></code></div><div class="spec-doc"><p>FIXME: remove the trailing `/`</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-caml_exn_slot_id"><a href="#val-caml_exn_slot_id" class="anchor"></a><code><span><span class="keyword">let</span> caml_exn_slot_id: <span><a href="#type-t">t</a> <span class="arrow">=&gt;</span></span> int;</span></code></div></div></div></body></html>